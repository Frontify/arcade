import{j as w}from"./jsx-runtime-Nms4Y4qS.js";import{r as t}from"./index-BwDkhjyp.js";import{u as S}from"./usePopper-DPXU-o95.js";import{u as A}from"./useClickOutside-CKV3CrvD.js";import{I as T}from"./borderStyle-D9jrV09G.js";import{m as N}from"./merge-DI-veSMP.js";const I=(i,d,u="li > button:not(:disabled)")=>{const[n,o]=t.useState(0),[s,r]=t.useState(),[f,a]=t.useState(""),m=t.useCallback(e=>{if(!s||!["Tab","ArrowDown","ArrowUp","Escape"].includes(e.key))return;const c=e.key==="Tab"&&!e.shiftKey,p=e.key==="Tab"&&e.shiftKey,y=e.key==="Escape",b=c||e.key==="ArrowDown",l=p||e.key==="ArrowUp";if(p&&n<=0||c&&n>=s.length-1||y){a("CLOSE_MENU");return}b?o(Math.min(n+1,s.length-1)):l&&o(Math.max(n-1,0)),e.preventDefault()},[s,n]);return t.useEffect(()=>{if(!i||!d)return;const e=d.querySelectorAll(u);for(const c of e)c.onkeydown=m;!s&&e.length>0&&r(e)},[i,d,s,m,u]),t.useEffect(()=>{s&&s[n]&&s[n].focus()},[n,s]),t.useEffect(()=>{i||(r(void 0),a("")),o(0)},[i]),f},M="tw-relative tw-bg-base tw-rounded tw-py-2 tw-shadow-mid tw-z-[120000]",k=N([M,T]),h=({triggerRef:i,children:d,open:u=!0,offset:n=[0,8],onClose:o,"data-test-id":s="menu"})=>{const[r,f]=t.useState(u),[a,m]=t.useState(null),[e,c]=t.useState(null),p=t.useCallback(()=>{a&&r&&(f(!1),o&&o())},[a,r,o]),{dismissibleElementRef:y}=A(p,[a]),b=I(r,e,"li > a, li > button:not(:disabled)"),l=S(a,e,{placement:"bottom-start",strategy:"fixed",modifiers:[{name:"flip",enabled:!0},{name:"offset",options:{offset:n}}]});return t.useEffect(()=>{const E=i==null?void 0:i.current;E&&m(E)},[i]),t.useEffect(()=>{f(u)},[u]),t.useEffect(()=>{r&&l.update&&l.update()},[r]),t.useEffect(()=>{b==="CLOSE_MENU"&&a&&(f(!1),o&&o())},[b,o,a]),w.jsx("nav",{className:N([k,r?"tw-block":"tw-hidden"]),ref:c,style:a?l.styles.popper:{},...a?l.attributes.popper:{},"data-test-id":s,role:r?"navigation":"",children:w.jsx("ol",{ref:y,className:"tw-list-none",children:d})})};h.displayName="FondueMenu";h.__docgenInfo={description:"",methods:[],displayName:"FondueMenu",props:{triggerRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"Element"}],raw:"RefObject<Element>"},description:""},open:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},children:{required:!1,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},offset:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[0, 8]",computed:!1}},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'menu'",computed:!1}}}};export{h as M};
