import{r as u}from"./index-BwDkhjyp.js";import{$ as A,a as K,b as V}from"./SSRProvider-CYXx33DY.js";const h=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},$=e=>e&&"window"in e&&e.window===e?e:h(e).defaultView||window;function F(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function T(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function b(e){let n=null;return()=>(n==null&&(n=e()),n)}const x=b(function(){return T(/^Mac/i)}),O=b(function(){return T(/^iPhone/i)}),_=b(function(){return T(/^iPad/i)||x()&&navigator.maxTouchPoints>1}),j=b(function(){return O()||_()}),ne=b(function(){return x()||j()}),re=b(function(){return F(/AppleWebKit/i)&&!R()}),R=b(function(){return F(/Chrome/i)}),k=b(function(){return F(/Android/i)}),oe=b(function(){return F(/Firefox/i)});function U(e){return e.mozInputSource===0&&e.isTrusted?!0:k()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function ae(e){return!k()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}class z{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function M(e){let n=u.useRef({isFocused:!1,observer:null});A(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=K(r=>{e==null||e(r)});return u.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,a=i=>{n.current.isFocused=!1,o.disabled&&t(new z("blur",i)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",a,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var i;(i=n.current.observer)===null||i===void 0||i.disconnect();let f=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:f})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:f}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function G(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const a=u.useCallback(s=>{if(s.target===s.currentTarget)return r&&r(s),o&&o(!1),!0},[r,o]),i=M(a),f=u.useCallback(s=>{const c=h(s.target);s.target===s.currentTarget&&c.activeElement===s.target&&(t&&t(s),o&&o(!0),i(s))},[o,t,i]);return{focusProps:{onFocus:!n&&(t||o||r)?f:void 0,onBlur:!n&&(r||o)?a:void 0}}}let l=null,g=new Set,p=new Map,v=!1,L=!1;const N={Tab:!0,Escape:!0};function y(e,n){for(let t of g)t(e,n)}function Y(e){return!(e.metaKey||!x()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function w(e){v=!0,Y(e)&&(l="keyboard",y("keyboard",e))}function d(e){l="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(v=!0,y("pointer",e))}function C(e){U(e)&&(v=!0,l="virtual")}function S(e){e.target===window||e.target===document||(!v&&!L&&(l="virtual",y("virtual",e)),v=!1,L=!1)}function W(){v=!1,L=!0}function E(e){if(typeof window>"u"||p.get($(e)))return;const n=$(e),t=h(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){v=!0,r.apply(this,arguments)},t.addEventListener("keydown",w,!0),t.addEventListener("keyup",w,!0),t.addEventListener("click",C,!0),n.addEventListener("focus",S,!0),n.addEventListener("blur",W,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",d,!0),t.addEventListener("pointermove",d,!0),t.addEventListener("pointerup",d,!0)):(t.addEventListener("mousedown",d,!0),t.addEventListener("mousemove",d,!0),t.addEventListener("mouseup",d,!0)),n.addEventListener("beforeunload",()=>{D(e)},{once:!0}),p.set(n,{focus:r})}const D=(e,n)=>{const t=$(e),r=h(e);n&&r.removeEventListener("DOMContentLoaded",n),p.has(t)&&(t.HTMLElement.prototype.focus=p.get(t).focus,r.removeEventListener("keydown",w,!0),r.removeEventListener("keyup",w,!0),r.removeEventListener("click",C,!0),t.removeEventListener("focus",S,!0),t.removeEventListener("blur",W,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",d,!0),r.removeEventListener("pointermove",d,!0),r.removeEventListener("pointerup",d,!0)):(r.removeEventListener("mousedown",d,!0),r.removeEventListener("mousemove",d,!0),r.removeEventListener("mouseup",d,!0)),p.delete(t))};function q(e){const n=h(e);let t;return n.readyState!=="loading"?E(e):(t=()=>{E(e)},n.addEventListener("DOMContentLoaded",t)),()=>D(e,t)}typeof document<"u"&&q();function H(){return l!=="pointer"}function ie(){return l}function ue(e){l=e,y(e,null)}function se(){E();let[e,n]=u.useState(l);return u.useEffect(()=>{let t=()=>{n(l)};return g.add(t),()=>{g.delete(t)}},[]),V()?null:e}const J=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Q(e,n,t){var r;const o=typeof window<"u"?$(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?$(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,i=typeof window<"u"?$(t==null?void 0:t.target).HTMLElement:HTMLElement,f=typeof window<"u"?$(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof o&&!J.has(t==null||(r=t.target)===null||r===void 0?void 0:r.type)||(t==null?void 0:t.target)instanceof a||(t==null?void 0:t.target)instanceof i&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof f&&!N[t.key])}function X(e,n,t){E(),u.useEffect(()=>{let r=(o,a)=>{Q(!!(t!=null&&t.isTextInput),o,a)&&e(H())};return g.add(r),()=>{g.delete(r)}},n)}function Z(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:r,onFocusWithinChange:o}=e,a=u.useRef({isFocusWithin:!1}),i=u.useCallback(c=>{a.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(a.current.isFocusWithin=!1,t&&t(c),o&&o(!1))},[t,o,a]),f=M(i),s=u.useCallback(c=>{!a.current.isFocusWithin&&document.activeElement===c.target&&(r&&r(c),o&&o(!0),a.current.isFocusWithin=!0,f(c))},[r,o,f]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:s,onBlur:i}}}function ce(e={}){let{autoFocus:n=!1,isTextInput:t,within:r}=e,o=u.useRef({isFocused:!1,isFocusVisible:n||H()}),[a,i]=u.useState(!1),[f,s]=u.useState(()=>o.current.isFocused&&o.current.isFocusVisible),c=u.useCallback(()=>s(o.current.isFocused&&o.current.isFocusVisible),[]),P=u.useCallback(m=>{o.current.isFocused=m,i(m),c()},[c]);X(m=>{o.current.isFocusVisible=m,c()},[],{isTextInput:t});let{focusProps:I}=G({isDisabled:r,onFocusChange:P}),{focusWithinProps:B}=Z({isDisabled:!r,onFocusWithinChange:P});return{isFocused:a,isFocusVisible:f,focusProps:r?B:I}}export{ce as $,Z as a,$ as b,h as c,ue as d,H as e,G as f,j as g,re as h,se as i,x as j,ne as k,ie as l,oe as m,_ as n,ae as o,U as p};
