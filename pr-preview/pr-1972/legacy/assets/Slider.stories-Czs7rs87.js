import{j as n}from"./jsx-runtime-Nms4Y4qS.js";import{r as s}from"./index-BwDkhjyp.js";import{T as pe,a as fe}from"./TextInput-Bn1Cza0a.js";import{u as me}from"./useMemoizedId-EtHZ7Sxa.js";import{d as we}from"./debounce-BfOZbKMa.js";import{m as w}from"./merge-DI-veSMP.js";import{V as O}from"./validation-C9S5KgfE.js";import"./_commonjsHelpers-BosuxZz1.js";import"./useFocusRing-4Vnvtzpc.js";import"./SSRProvider-CYXx33DY.js";import"./LoadingCircle-CZrma5le.js";import"./IconCheckMark-BVQYjlwc.js";import"./IconSize-BcCrF_mi.js";import"./IconEyeOff-BaqRyiPL.js";import"./IconCross-BUeQrH0h.js";import"./IconExclamationMarkTriangle-BucVSAOs.js";import"./IconExclamationMarkTriangle24-C3Ss9MHq.js";import"./focusStyle-CBFElZiz.js";import"./LegacyTooltip-C061YhHi.js";import"./useLink-DorAuuFQ.js";import"./useFocusable-CAGu0lKI.js";import"./chain-D5h1pgIF.js";import"./usePopper-DPXU-o95.js";import"./index-DxjWwZXO.js";import"./index-CfyPTyT-.js";import"./Button-CYWlMQhW.js";import"./useButton-DofEV6SJ.js";import"./Portal-0C9N3MSP.js";import"./IconExclamationMarkCircle-BkFYjnTO.js";import"./IconExclamationMarkCircle24-ChDY1Cve.js";const _=(g,x,E)=>Math.max(x,Math.min(g,E)),ge=0,be=100,ye=1,he=5,ve="Slider text input",xe=3,B=["ArrowUp","ArrowRight"],W=["ArrowDown","ArrowLeft"],X=["Home","End"],A=({id:g,label:x,value:E,min:r=ge,max:i=be,showMinMax:j=!1,step:p=ye,stepMultiplier:Z=he,valueSuffix:a="",onError:D,onChange:q,"aria-label":U=ve,disabled:t=!1,"data-test-id":S="fondue-slider"})=>{const[u,b]=s.useState(),[c,T]=s.useState(""),[m,V]=s.useState(),[k,I]=s.useState(),[l,ee]=s.useState(null),[te,$]=s.useState(!1),[C,N]=s.useState(!1),P=me(g),re=e=>{T(`${e.replace(a,"")}${a}`)},f=s.useCallback(({clientX:e,rawValue:o})=>{if(!l)return;const d=i-r,le=l.getBoundingClientRect().x,ue=l.clientWidth;let L;if(e!==void 0)L=(e-le)/ue;else{L=((o??r)-r)/d,I(_(L,0,1)*100);return}const ce=_(L,0,1),de=d/p,F=_(Math.round(ce*de)*p+r,r,i);I((F-r)/d*100),T(`${F}${a}`)},[l,i,r,p,a]),y=s.useMemo(()=>l?we(e=>{t||f({clientX:e.clientX??e.touches[0].clientX})},xe):()=>{},[f,l,t]),M=s.useCallback(()=>{l&&(N(!1),window.removeEventListener("mousemove",y),window.removeEventListener("touchmove",y),window.removeEventListener("mouseup",M))},[l,y]),R=e=>{!l||t||(N(!0),f({clientX:e.clientX??e.touches[0].clientX}),window.addEventListener("mousemove",y),window.addEventListener("touchmove",y),window.addEventListener("mouseup",M))},ae=e=>{if(![...B,...W,...X].includes(e.key)||u===void 0||t)return;e.preventDefault();let o=0,d=0;W.includes(e.key)?o=-p:B.includes(e.key)&&(o=p),X.includes(e.key)?d=e.key==="Home"?r:i:(o*=e.shiftKey?Z:1,d=_(Math.floor(u/p)*p+o,r,i)),b(d),T(`${d}${a}`)},oe=()=>{t||$(!0)},se=()=>{t||$(!1)},ne=()=>{t||N(!0)},ie=()=>{t||N(!1)};return s.useEffect(()=>{if(!l)return;if(r>i){V("MinMax");return}const e=E??r;b(e),T(`${e}${a}`),f({rawValue:e})},[l,f,r,i,E,a]),s.useEffect(()=>{if(!c)return;const e=c.replace(a,""),o=+e;if(Number.isNaN(o)||!e){b(void 0),V("ValueNaN");return}if(o<r||o>i){b(void 0),V("ValueOutOfRange");return}V(void 0),b(o)},[c,a,r,i]),s.useEffect(()=>{if(m||u===void 0||!c)return;const o=+c.replace(a,"");Number.isNaN(o)||u!==o||(f({rawValue:u}),t||q({raw:u,withSuffix:c.replace(a,"")+a}))},[u,c,a,m,q,f,t]),s.useEffect(()=>{m&&D&&D(m)},[m,D]),n.jsxs("div",{className:"tw-flex tw-flex-col","data-test-id":S,id:P,children:[n.jsx("label",{htmlFor:P,className:w([!x&&"tw-hidden",t&&"tw-text-text-disabled"]),"data-test-id":`${S}-label`,children:x}),n.jsx("div",{className:"tw-flex",children:n.jsxs("div",{className:w(["tw-flex-1 tw-flex tw-items-center"]),children:[j&&n.jsxs("div",{className:w(["tw-mr-3",t&&"tw-text-text-disabled"]),children:[r,a]}),n.jsxs("button",{ref:ee,"data-test-id":`${S}-interactive`,className:"tw-flex-1 tw-relative tw-h-full tw-cursor-pointer disabled:tw-cursor-default tw-outline-none",onMouseOver:oe,onMouseOut:se,onFocus:ne,onBlur:ie,onMouseDown:R,onMouseUp:M,onTouchStart:R,onTouchEnd:M,onKeyDown:ae,disabled:t,children:[n.jsx("span",{className:"tw-absolute tw-block tw-top-1/2 tw--translate-y-1/2 tw-w-full tw-h-1 tw-rounded-sm tw-bg-box-neutral tw-flex-1"}),k!==void 0&&n.jsx("span",{role:"slider","aria-valuenow":u,"aria-valuemin":r,"aria-valuemax":i,"aria-label":U,"data-test-id":`${S}-track`,className:w(["tw-absolute tw-block tw-top-1/2 tw--translate-y-1/2 tw-origin-left tw-w-full tw-h-1  tw-rounded-sm tw-bg-box-neutral-strong tw-flex-1",t&&"tw-bg-box-neutral"]),style:{width:`${k}%`}}),n.jsx("span",{className:w(["tw-absolute tw-block tw-top-1/2 tw--translate-y-1/2 tw--translate-x-1/2 tw-w-5 tw-h-5","after:tw-absolute after:tw-block after:tw-top-1/2 after:tw-left-1/2 after:tw--translate-y-1/2 after:tw--translate-x-1/2 after:tw-w-5 after:tw-h-5 after:tw-bg-base after:tw-rounded-full after:tw-border after:tw-border-line-strong",te&&!C&&"after:tw-shadow",C&&"after:tw-border-line-xx-strong before:tw-content-[''] before:tw-opacity-25 before:tw-top-1/2 before:tw--translate-y-1/2 before:tw--translate-x-1/2 before:tw-left-1/2 before:tw-block before:tw-rounded-full before:tw-absolute before:tw-z-0 before:tw-w-9 before:tw-h-9 before:tw-bg-box-neutral-strong",t&&"after:tw-bg-box-neutral after:tw-border-line-weak"]),style:{left:`${k}%`}})]}),j&&n.jsxs("div",{className:w(["tw-ml-3",t&&"tw-text-text-disabled"]),children:[i,a]}),n.jsx("div",{className:"tw-w-16 tw-ml-3",children:n.jsx(pe,{id:`${P}-text-input`,value:c,placeholder:U,type:fe.Text,validation:m?O.Error:O.Default,onChange:re,disabled:t})})]})})]})};A.displayName="FondueSlider";A.__docgenInfo={description:"",methods:[],displayName:"FondueSlider",props:{id:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"number"},description:""},min:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},max:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"100",computed:!1}},showMinMax:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},stepMultiplier:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(errorCode: SliderError) => void",signature:{arguments:[{type:{name:"SliderError"},name:"errorCode"}],return:{name:"void"}}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: SliderValue) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    raw: number;
    withSuffix: string;
}`,signature:{properties:[{key:"raw",value:{name:"number",required:!0}},{key:"withSuffix",value:{name:"string",required:!0}}]}},name:"value"}],return:{name:"void"}}},description:""},valueSuffix:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'fondue-slider'",computed:!1}},"aria-label":{defaultValue:{value:"'Slider text input'",computed:!1},required:!1}}};const et={title:"Components/Slider",component:A,tags:["autodocs"],argTypes:{id:{type:"string"},value:{type:"number"},min:{type:"number"},max:{type:"number"},step:{type:"number"},stepMultiplier:{type:"number"},label:{type:"string"},"aria-label":{type:"string"},valueSuffix:{type:"string"},showMinMax:{type:"boolean"},disabled:{type:"boolean"},onChange:{action:"Value change"},onError:{action:"Slider error"}},args:{min:0,max:100,stepMultiplier:5}},Q=g=>n.jsx(A,{...g}),h=Q.bind({});h.args={min:0,max:100,value:30,step:1,valueSuffix:"%","aria-label":"Percentage slider"};const v=Q.bind({});v.args={value:20,"aria-label":"Percentage slider",disabled:!0};var K,z,Y;h.parameters={...h.parameters,docs:{...(K=h.parameters)==null?void 0:K.docs,source:{originalSource:`(args: SliderProps) => {
  return <Slider {...args} />;
}`,...(Y=(z=h.parameters)==null?void 0:z.docs)==null?void 0:Y.source}}};var H,G,J;v.parameters={...v.parameters,docs:{...(H=v.parameters)==null?void 0:H.docs,source:{originalSource:`(args: SliderProps) => {
  return <Slider {...args} />;
}`,...(J=(G=v.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};const tt=["BasicUsage","DisabledState"];export{h as BasicUsage,v as DisabledState,tt as __namedExportsOrder,et as default};
