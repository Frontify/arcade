import{j as e}from"./jsx-runtime-Nms4Y4qS.js";import{$ as b}from"./useFocusRing-Vzyl7-Lk.js";import{r as i}from"./index-BwDkhjyp.js";import{L as tt,a as et}from"./LoadingCircle-CZrma5le.js";import{I as st}from"./IconCheckMark-ByVuQE55.js";import{b as rt,c as ot,d as at,e as lt}from"./IconEyeOff-BAmb6qT8.js";import{I as it}from"./IconCross-CxP4FPDR.js";import{I as ct}from"./IconExclamationMarkTriangle-DvvXw1YP.js";import{u as ut}from"./useMemoizedId-EtHZ7Sxa.js";import{F as k}from"./focusStyle-CBFElZiz.js";import{m as u}from"./merge-DI-veSMP.js";import{V as p,v as nt}from"./validation-C9S5KgfE.js";import{L as dt}from"./LegacyTooltip-BI7N2mWT.js";const wt=(s=2e3)=>{const[r,c]=i.useState("idle"),a=i.useCallback(async n=>{c("idle");try{await navigator.clipboard.writeText(n),c("success")}catch{c("error")}},[]);return i.useEffect(()=>{let n;return s&&(r==="success"||r==="error")&&(n=setTimeout(()=>c("idle"),s)),()=>{s&&(r==="success"||r==="error")&&clearTimeout(n)}},[r,s]),{copy:a,status:r}};var ft=(s=>(s.Text="text",s.Password="password",s.Number="number",s.Search="search",s))(ft||{});const pt=({extraAction:s,disabled:r},c)=>{const{isFocusVisible:a,focusProps:n}=b();if(!s)return null;const x=r||s.disabled;return e.jsx("button",{className:u(["tw-flex tw-items-center tw-justify-center tw-transition-colors tw-rounded tw-p-1",x?"tw-cursor-default tw-text-text-disabled":"tw-text-text-weak hover:tw-bg-box-neutral-hover hover:tw-text-box-neutral-inverse-hover",a&&k]),onClick:s.onClick,"data-test-id":"fondue-extra-action-icon","aria-label":s.title.toLowerCase(),disabled:x,"aria-disabled":x,type:"button",ref:c,...n,children:s.icon})},$=i.forwardRef(pt),R=i.forwardRef(({id:s,type:r="text",decorator:c,validation:a=p.Default,clearable:n=!1,placeholder:x,required:S,obfuscated:m,disabled:o=!1,autocomplete:D=!1,dotted:O=!1,value:g="",copyable:z=!1,onChange:w,onEnterPressed:F,onBlur:y,onClear:v,onFocus:E,size:W,spellcheck:N,readonly:j,focusOnMount:T,selectable:_=!1,extraActions:I,maxLength:G,...U},H)=>{const f=i.useRef(null);i.useImperativeHandle(H,()=>f.current,[]);const{isFocusVisible:K,focusProps:d}=b({isTextInput:!0}),{isFocusVisible:C,focusProps:M}=b(),{isFocusVisible:q,focusProps:Y}=b(),{isFocusVisible:B,focusProps:J}=b(),{copy:Q,status:V}=wt(),[h,L]=i.useState(typeof m=="boolean"?m:r==="password");i.useEffect(()=>{setTimeout(()=>{var t;T&&((t=f.current)==null||t.focus())},0)},[T]),i.useEffect(()=>{typeof m=="boolean"&&L(m)},[m]);const X=t=>{t.key==="Enter"&&F&&F(t)},Z=()=>r==="password"?h?"password":"text":r,A=typeof N=="boolean"?{spellCheck:N}:null;return e.jsxs("div",{...U,className:u(["tw-flex tw-items-center tw-h-9 tw-gap-2 tw-px-3 tw-border tw-transition tw-rounded tw-text-body-small tw-font-sans tw-relative tw-bg-base dark:tw-bg-transparent",O?"tw-border-dashed":"tw-border-solid",o||j?"tw-bg-box-disabled dark:tw-bg-box-disabled hover:tw-cursor-not-allowed tw-border-line-weak dark:tw-border-line-weak":u(["focus-within:tw-border-line-xx-strong focus-within:hover:tw-border-line-xx-strong hover:tw-border-line-x-strong",nt[a],K&&!C&&!q&&!B&&k])]),"data-test-id":"fondue-text-input-component",children:[c&&e.jsx("div",{className:u(["tw-flex tw-items-center tw-justify-center tw-pl-1",o?"tw-text-black-60":"tw-text-black-80"]),"data-test-id":"decorator",children:c}),e.jsx("input",{...d,id:ut(s),ref:f,className:u(["tw-w-full tw-grow tw-border-none tw-outline-none tw-bg-transparent tw-hide-input-arrows",o||j?"tw-text-text-disabled tw-placeholder-text-disabled dark:tw-text-black-30 dark:tw-placeholder-black-40 hover:tw-cursor-not-allowed":"tw-text-black tw-placeholder-black-60 dark:tw-text-white"]),onClick:()=>{var t;return(t=f.current)==null?void 0:t.focus()},onChange:t=>w==null?void 0:w(t.currentTarget.value),onBlur:t=>{var l;(l=d.onBlur)==null||l.call(d,t),y==null||y(t)},onKeyDown:X,placeholder:x,value:g,type:Z(),required:S,readOnly:j,disabled:o,onFocus:t=>{var l;(l=d.onFocus)==null||l.call(d,t),_&&t.target.select(),E&&E(t)},autoComplete:D?"on":"off",maxLength:G,size:W,"data-test-id":"text-input",...A}),I&&I.length>0&&I.map((t,l)=>{const P=`text-input-extra-action-${l}`;return t.tooltip?e.jsx(dt,{...t.tooltip,triggerElement:e.jsx($,{extraAction:t,disabled:o})},P):e.jsx($,{extraAction:t,disabled:o},P)}),`${g}`.length>0&&n&&e.jsx("button",{className:u(["tw-flex tw-items-center tw-justify-center tw-transition-colors tw-rounded",o?"tw-cursor-default tw-text-black-40":"tw-text-black-60  hover:tw-text-black-100",C&&k]),onClick:()=>{var t,l;(t=f.current)==null||t.focus(),(l=f.current)==null||l.setAttribute("value",""),w==null||w(""),v==null||v()},"data-test-id":"clear-icon",title:"Clear text input","aria-label":"clear text input",disabled:o,type:"button",...M,children:e.jsx(it,{})}),r==="password"&&e.jsx("button",{className:u(["tw-flex tw-items-center tw-justify-center tw-transition-colors tw-rounded",o?"tw-cursor-default tw-text-black-40":"tw-text-black-60 hover:tw-text-black-100",q&&k]),onClick:()=>L(!h),"data-test-id":"visibility-icon",title:"Toggle text visibility",type:"button","aria-label":`${h?"unveil":"obfuscate"} text input`,disabled:o,...Y,children:h?e.jsx(rt,{}):e.jsx(ot,{})}),a===p.Loading&&e.jsx("span",{className:"tw-absolute tw-top-[-0.55rem] tw-right-[-0.55rem] tw-bg-white tw-rounded-full tw-p-[2px] tw-border tw-border-black-10",children:e.jsx(tt,{size:et.ExtraSmall})}),(a===p.Error||a===p.Warning)&&e.jsx("span",{className:u(["tw-flex tw-items-center tw-justify-center",a===p.Error&&"tw-text-text-negative",a===p.Warning&&"tw-text-text-warning"]),"data-test-id":"error-state-exclamation-mark-icon",children:e.jsx(ct,{})}),z&&e.jsxs("button",{className:u(["tw-flex tw-items-center tw-justify-center tw-transition-colors tw-rounded",o?"tw-cursor-default tw-text-black-40":"tw-text-black-60 hover:tw-text-black-100",B&&k]),onClick:()=>Q(g),"data-test-id":"copy-icon",title:"Copy input text",disabled:o,type:"button",...J,children:[V==="error"&&e.jsx("span",{className:"tw-text-box-negative-strong",children:e.jsx(at,{})}),V==="idle"&&e.jsx(lt,{}),V==="success"&&e.jsx("span",{className:"tw-text-box-positive-strong",children:e.jsx(st,{})})]})]})});R.displayName="FondueTextInput";R.__docgenInfo={description:"@deprecated Use `TextInput` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#text-input the migration guide}.",methods:[],displayName:"FondueTextInput",props:{type:{defaultValue:{value:"TextInputType.Text",computed:!0},required:!1},validation:{defaultValue:{value:"Validation.Default",computed:!0},required:!1},clearable:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1},autocomplete:{defaultValue:{value:"false",computed:!1},required:!1},dotted:{defaultValue:{value:"false",computed:!1},required:!1},value:{defaultValue:{value:"''",computed:!1},required:!1},copyable:{defaultValue:{value:"false",computed:!1},required:!1},selectable:{defaultValue:{value:"false",computed:!1},required:!1}}};export{R as T,ft as a};
