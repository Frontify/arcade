import{j as u}from"./jsx-runtime-Nms4Y4qS.js";import{r as o}from"./index-BwDkhjyp.js";import{I as te}from"./IconMinus16-ChDakrvn.js";import{I as ne}from"./IconPlus16-xrjAMgl7.js";import{u as re}from"./useMemoizedId-EtHZ7Sxa.js";import{I as ae,G as se,a}from"./input-B0p1lE51.js";import{m as E}from"./merge-DI-veSMP.js";import{V as ue,v as le}from"./validation-C9S5KgfE.js";var l=(c=>(c[c.DECREMENT=0]="DECREMENT",c[c.INCREMENT=1]="INCREMENT",c))(l||{});const oe=["ArrowUp","ArrowRight"],ie=["ArrowDown","ArrowLeft"],ce=["Backspace","Tab"],U=({id:c,size:_,disabled:d=!1,required:F,readOnly:m,status:w=ue.Default,decorator:D,suffix:r="",controls:W,clearable:L,placeholder:Y,stepInterval:T=10,title:z,defaultValue:x,hugWidth:B,value:G,valueSelect:f,onChange:N,onKeyDown:S,onBlur:j,onFocus:K,"aria-label":H="Number Input","data-test-id":i="fondue-number-input",...O})=>{const C=o.useRef(0),R=o.useRef(!1),M=o.useRef(!1),n=o.useRef(null),y=d||m,b=o.useCallback(()=>{if(n.current){const{value:e}=n.current;return r?e.replace(`${r}`,"").trim():e}return""},[n,r]),g=()=>{clearInterval(C.current),M.current=!1},v=e=>{n.current&&!d&&(M.current=!0,J(e))},J=e=>{(()=>{let p=0,s=0;C.current=window.setInterval(()=>{switch(!0){case p>2e3:s+=5;break;case p>5e3:s+=10;break;default:s=1}h(e,s),p+=250},250)})()},Q=e=>{const{key:t,shiftKey:p}=e;if(ce.includes(t)){const s=b(),V=s.length===2&&s.includes("-");((s==null?void 0:s.length)===0||V)&&P();return}else if(!isNaN(Number(t)))return;e.preventDefault(),R.current=p,ie.includes(t)?h(l.DECREMENT):oe.includes(t)&&h(l.INCREMENT),S&&S(e)},X=e=>{e.preventDefault(),R.current=e.shiftKey,n.current&&q()},h=(e,t=1)=>{const s=(()=>{const V=b(),k=Number(V)||0;switch(t=R.current?T:t,e){case l.DECREMENT:return k-t;case l.INCREMENT:return k+t;default:return k}})();A(s)},A=e=>{if(n.current){const t=e.toString();if(n.current.value=r?`${t} ${r}`:t,M.current)return;q()}},$=o.useCallback(()=>{if(f&&n.current){const e=n.current.value.length,t=r?e-r.length-1:e;n.current.setSelectionRange(0,t)}},[r,f]),I=o.useCallback(()=>{if(r&&n.current){const e=n.current.value.length-r.length-1;n.current.setSelectionRange(e,e)}},[r,n]),q=o.useCallback(()=>{const e=b();N==null||N(e?Number(e):void 0),r&&I(),f&&$()},[r,f,N,b,I,$]),P=()=>{n.current&&(n.current.value=x?x.toString():""),q()},Z=e=>{K&&K(e)},ee=e=>{j&&j(e)};return o.useEffect(()=>{clearInterval(C.current)},[]),u.jsxs("div",{className:E([a.base,a.height,a.hover,a.focusWithin,B?"tw-w-auto":a.width,d||m?a.readOnly:"",w?le[w]:""]),"data-test-id":i,children:[D?u.jsx("div",{className:E(["tw-flex tw-items-center tw-justify-center tw-pl-1",y?"tw-text-text-disabled":"tw-text-text"]),"data-test-id":`${i}-decorator`,children:D}):null,u.jsx("input",{...O,defaultValue:x,value:G,id:re(c),ref:n,name:i,type:r||f?"text":"number",placeholder:Y,className:E(["tw-hide-input-arrows",a.width,a.element,d?a.disabled:"",m?a.readOnly:""]),onClick:r?I:void 0,onChange:()=>A(Number(b())),onKeyDown:Q,onKeyUp:X,onFocus:Z,onBlur:ee,size:_,title:z,"aria-label":H,required:F,readOnly:m,disabled:d,"data-test-id":`${i}-input`}),u.jsxs("span",{className:"tw-flex tw-items-center",children:[W?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:E(["tw-text-text-weak tw-p-1 hover:tw-rounded-sm hover:tw-bg-box-neutral hover:tw-text-box-neutral-inverse focus:tw-ring-line-xx-strong focus:tw-bg-box-neutral",d?a.disabled:"",m?a.readOnly:""]),type:"button",onClick:e=>{if(e.button===0){const t=e.shiftKey?T:1;h(l.DECREMENT,t)}},onMouseDown:e=>e.shiftKey||e.button>0?null:v(l.DECREMENT),onMouseUp:g,onTouchStart:e=>e.shiftKey?null:v(l.DECREMENT),onTouchEnd:g,disabled:y,"aria-label":"Decrement value",title:"Decrement value","data-test-id":`${i}-decrement`,children:u.jsx(te,{})}),u.jsx("button",{className:E(["tw-text-text-weak tw-p-1 hover:tw-rounded-sm hover:tw-bg-box-neutral hover:tw-text-box-neutral-inverse focus:tw-ring-line-xx-strong focus:tw-bg-box-neutral",d?a.disabled:"",m?a.readOnly:""]),type:"button",onClick:e=>{if(e.button===0){const t=e.shiftKey?T:1;h(l.INCREMENT,t)}},onMouseDown:e=>e.shiftKey||e.button>0?null:v(l.INCREMENT),onMouseUp:g,onTouchStart:e=>e.shiftKey?null:v(l.INCREMENT),onTouchEnd:g,disabled:y,"aria-label":"Increment value",title:"Increment value","data-test-id":`${i}-increment`,children:u.jsx(ne,{})})]}):null,u.jsx(ae,{disabled:y,clearable:L,callbacks:{clearable:P},dataTestId:i}),w?se(w,i):null]})]})};U.displayName="FondueNumberInput";U.__docgenInfo={description:"",methods:[],displayName:"FondueNumberInput",props:{controls:{required:!1,tsType:{name:"boolean"},description:""},stepInterval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},size:{required:!1,tsType:{name:"number"},description:""},suffix:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},value:{required:!1,tsType:{name:"TValue"},description:""},valueSelect:{required:!1,tsType:{name:"boolean"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: TValue) => void",signature:{arguments:[{type:{name:"TValue"},name:"value"}],return:{name:"void"}}},description:""},autocomplete:{required:!1,tsType:{name:"boolean"},description:""},clearable:{required:!1,tsType:{name:"boolean"},description:""},decorator:{required:!1,tsType:{name:"ReactElement"},description:""},extraActions:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    icon: ReactElement;
    title: string;
    callback: () => void;
}`,signature:{properties:[{key:"icon",value:{name:"ReactElement",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"callback",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0}}]}}],raw:"ExtraAction[]"},description:""},hugWidth:{required:!1,tsType:{name:"boolean"},description:""},id:{required:!1,tsType:{name:"string"},description:""},status:{required:!1,tsType:{name:"Validation"},description:"",defaultValue:{value:"Validation.Default",computed:!0}},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'fondue-number-input'",computed:!1}},disabled:{defaultValue:{value:"false",computed:!1},required:!1},"aria-label":{defaultValue:{value:"'Number Input'",computed:!1},required:!1}}};export{U as N};
