import{r as v,R as ne}from"./index-ClcD9ViR.js";import{i as Ee,$ as Ke,b as se,d as Pe,g as ee,j as ue,k as Fe}from"./useFocusable-CZi8_B22.js";import{$ as Ce}from"./chain-B69fAeb4.js";import{$ as te,a as le}from"./useEffectEvent-23OTMzEQ.js";import{l as Re,m as Le,f as de}from"./useFocusRing-B9BQthcQ.js";import{$ as ie}from"./isScrollable-BSEN4xi5.js";import{r as ke}from"./index-BrlJLjep.js";import{b as Ie}from"./FocusScope-w2zxYk15.js";import{$ as xe}from"./context-nOjF3i7Y.js";import{c as Ne}from"./SelectionManager-35gLbgrT.js";import{j as fe}from"./jsx-runtime-BYYWji4R.js";function he(r,e){const t=v.useRef(!0),l=v.useRef(null);te(()=>(t.current=!0,()=>{t.current=!1}),[]),te(()=>{t.current?t.current=!1:(!l.current||e.some((i,o)=>!Object.is(i,l[o])))&&r(),l.current=e},e)}function Me(r,e){const t=[];for(;r&&r!==document.documentElement;)ie(r,e)&&t.push(r),r=r.parentElement;return t}let Ae=0;const J=new Map;function Be(r){let[e,t]=v.useState();return te(()=>{if(!r)return;let l=J.get(r);if(l)t(l.element.id);else{let i=`react-aria-description-${Ae++}`;t(i);let o=document.createElement("div");o.id=i,o.style.display="none",o.textContent=r,document.body.appendChild(o),l={refCount:0,element:o},J.set(r,l)}return l.refCount++,()=>{l&&--l.refCount===0&&(l.element.remove(),J.delete(r))}},[r]),{"aria-describedby":r?e:void 0}}function z(r,e,t,l){let i=le(t),o=t==null;v.useEffect(()=>{if(o||!r.current)return;let u=r.current;return u.addEventListener(e,i,l),()=>{u.removeEventListener(e,i,l)}},[r,e,l,o,i])}function De(r,e){let t=pe(r,e,"left"),l=pe(r,e,"top"),i=e.offsetWidth,o=e.offsetHeight,u=r.scrollLeft,d=r.scrollTop,{borderTopWidth:f,borderLeftWidth:b,scrollPaddingTop:$,scrollPaddingRight:K,scrollPaddingBottom:p,scrollPaddingLeft:c}=getComputedStyle(r),P=u+parseInt(b,10),S=d+parseInt(f,10),N=P+r.clientWidth,x=S+r.clientHeight,E=parseInt($,10)||0,w=parseInt(p,10)||0,R=parseInt(K,10)||0,T=parseInt(c,10)||0;t<=u+T?u=t-parseInt(b,10)-T:t+i>N-R&&(u+=t+i-N+R),l<=S+E?d=l-parseInt(f,10)-E:l+o>x-w&&(d+=l+o-x+w),r.scrollLeft=u,r.scrollTop=d}function pe(r,e,t){const l=t==="left"?"offsetLeft":"offsetTop";let i=0;for(;e.offsetParent&&(i+=e[l],e.offsetParent!==r);){if(e.offsetParent.contains(r)){i-=r[l];break}e=e.offsetParent}return i}function ye(r,e){if(r&&document.contains(r)){let u=document.scrollingElement||document.documentElement;if(window.getComputedStyle(u).overflow==="hidden"){let f=Me(r);for(let b of f)De(b,r)}else{var t;let{left:f,top:b}=r.getBoundingClientRect();r==null||(t=r.scrollIntoView)===null||t===void 0||t.call(r,{block:"nearest"});let{left:$,top:K}=r.getBoundingClientRect();if(Math.abs(f-$)>1||Math.abs(b-K)>1){var l,i,o;e==null||(i=e.containingElement)===null||i===void 0||(l=i.scrollIntoView)===null||l===void 0||l.call(i,{block:"center",inline:"center"}),(o=r.scrollIntoView)===null||o===void 0||o.call(r,{block:"nearest"})}}}}const Oe="react-aria-clear-focus",He="react-aria-focus",Se="react-aria-update-activedescendant";function H(r){return Re()?r.metaKey:r.ctrlKey}let U=!1,Q=0;function re(){U=!0,setTimeout(()=>{U=!1},50)}function ve(r){r.pointerType==="touch"&&re()}function We(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",ve):document.addEventListener("touchend",re),Q++,()=>{Q--,!(Q>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",ve):document.removeEventListener("touchend",re))}}function ut(r){let{onHoverStart:e,onHoverChange:t,onHoverEnd:l,isDisabled:i}=r,[o,u]=v.useState(!1),d=v.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;v.useEffect(We,[]);let{hoverProps:f,triggerHoverEnd:b}=v.useMemo(()=>{let $=(c,P)=>{if(d.pointerType=P,i||P==="touch"||d.isHovered||!c.currentTarget.contains(c.target))return;d.isHovered=!0;let S=c.currentTarget;d.target=S,e&&e({type:"hoverstart",target:S,pointerType:P}),t&&t(!0),u(!0)},K=(c,P)=>{if(d.pointerType="",d.target=null,P==="touch"||!d.isHovered)return;d.isHovered=!1;let S=c.currentTarget;l&&l({type:"hoverend",target:S,pointerType:P}),t&&t(!1),u(!1)},p={};return typeof PointerEvent<"u"?(p.onPointerEnter=c=>{U&&c.pointerType==="mouse"||$(c,c.pointerType)},p.onPointerLeave=c=>{!i&&c.currentTarget.contains(c.target)&&K(c,c.pointerType)}):(p.onTouchStart=()=>{d.ignoreEmulatedMouseEvents=!0},p.onMouseEnter=c=>{!d.ignoreEmulatedMouseEvents&&!U&&$(c,"mouse"),d.ignoreEmulatedMouseEvents=!1},p.onMouseLeave=c=>{!i&&c.currentTarget.contains(c.target)&&K(c,"mouse")}),{hoverProps:p,triggerHoverEnd:K}},[e,t,l,i,d]);return v.useEffect(()=>{i&&b({currentTarget:d.target},d.pointerType)},[i]),{hoverProps:f,isHovered:o}}const ze=500;function Ue(r){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:i,threshold:o=ze,accessibilityDescription:u}=r;const d=v.useRef(void 0);let{addGlobalListener:f,removeGlobalListener:b}=Ee(),{pressProps:$}=Ke({isDisabled:e,onPressStart(p){if(p.continuePropagation(),(p.pointerType==="mouse"||p.pointerType==="touch")&&(t&&t({...p,type:"longpressstart"}),d.current=setTimeout(()=>{p.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),i&&i({...p,type:"longpress"}),d.current=void 0},o),p.pointerType==="touch")){let c=P=>{P.preventDefault()};f(p.target,"contextmenu",c,{once:!0}),f(window,"pointerup",()=>{setTimeout(()=>{b(p.target,"contextmenu",c)},30)},{once:!0})}},onPressEnd(p){d.current&&clearTimeout(d.current),l&&(p.pointerType==="mouse"||p.pointerType==="touch")&&l({...p,type:"longpressend"})}}),K=Be(i&&!e?u:void 0);return{longPressProps:se($,K)}}let _=new Map;function je(r){let{locale:e}=xe(),t=e+(r?Object.entries(r).sort((i,o)=>i[0]<o[0]?-1:1).join():"");if(_.has(t))return _.get(t);let l=new Intl.Collator(e,r);return _.set(t,l),l}function oe(r){return Le()?r.altKey:r.ctrlKey}const Ge=1e3;function Ve(r){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=r,i=v.useRef({search:"",timeout:void 0}).current,o=u=>{let d=Ye(u.key);if(!(!d||u.ctrlKey||u.metaKey||!u.currentTarget.contains(u.target))){if(d===" "&&i.search.trim().length>0&&(u.preventDefault(),"continuePropagation"in u||u.stopPropagation()),i.search+=d,e.getKeyForSearch!=null){let f=e.getKeyForSearch(i.search,t.focusedKey);f==null&&(f=e.getKeyForSearch(i.search)),f!=null&&(t.setFocusedKey(f),l&&l(f))}clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},Ge)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?o:void 0}}}function Ye(r){return r.length===1||!/^[A-Z]/i.test(r)?r:""}function Xe(r){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:i=!1,shouldFocusWrap:o=!1,disallowEmptySelection:u=!1,disallowSelectAll:d=!1,selectOnFocus:f=e.selectionBehavior==="replace",disallowTypeAhead:b=!1,shouldUseVirtualFocus:$,allowsTabNavigation:K=!1,isVirtualized:p,scrollRef:c=l,linkBehavior:P="action"}=r,{direction:S}=xe(),N=Pe(),x=s=>{var h;if(s.altKey&&s.key==="Tab"&&s.preventDefault(),!(!((h=l.current)===null||h===void 0)&&h.contains(s.target)))return;const y=(a,B)=>{if(a!=null){if(e.isLink(a)&&P==="selection"&&f&&!oe(s)){var I;ke.flushSync(()=>{e.setFocusedKey(a,B)});let ae=(I=c.current)===null||I===void 0?void 0:I.querySelector(`[data-key="${CSS.escape(a.toString())}"]`),ce=e.getItemProps(a);ae&&N.open(ae,s,ce.href,ce.routerOptions);return}if(e.setFocusedKey(a,B),e.isLink(a)&&P==="override")return;s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):f&&!oe(s)&&e.replaceSelection(a)}};switch(s.key){case"ArrowDown":if(t.getKeyBelow){var g,D,n;let a=e.focusedKey!=null?(g=t.getKeyBelow)===null||g===void 0?void 0:g.call(t,e.focusedKey):(D=t.getFirstKey)===null||D===void 0?void 0:D.call(t);a==null&&o&&(a=(n=t.getFirstKey)===null||n===void 0?void 0:n.call(t,e.focusedKey)),a!=null&&(s.preventDefault(),y(a))}break;case"ArrowUp":if(t.getKeyAbove){var m,C,j;let a=e.focusedKey!=null?(m=t.getKeyAbove)===null||m===void 0?void 0:m.call(t,e.focusedKey):(C=t.getLastKey)===null||C===void 0?void 0:C.call(t);a==null&&o&&(a=(j=t.getLastKey)===null||j===void 0?void 0:j.call(t,e.focusedKey)),a!=null&&(s.preventDefault(),y(a))}break;case"ArrowLeft":if(t.getKeyLeftOf){var G,V,Y;let a=e.focusedKey!=null?(G=t.getKeyLeftOf)===null||G===void 0?void 0:G.call(t,e.focusedKey):null;a==null&&o&&(a=S==="rtl"?(V=t.getFirstKey)===null||V===void 0?void 0:V.call(t,e.focusedKey):(Y=t.getLastKey)===null||Y===void 0?void 0:Y.call(t,e.focusedKey)),a!=null&&(s.preventDefault(),y(a,S==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var X,q,Z;let a=e.focusedKey!=null?(X=t.getKeyRightOf)===null||X===void 0?void 0:X.call(t,e.focusedKey):null;a==null&&o&&(a=S==="rtl"?(q=t.getLastKey)===null||q===void 0?void 0:q.call(t,e.focusedKey):(Z=t.getFirstKey)===null||Z===void 0?void 0:Z.call(t,e.focusedKey)),a!=null&&(s.preventDefault(),y(a,S==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){if(e.focusedKey===null&&s.shiftKey)return;s.preventDefault();let a=t.getFirstKey(e.focusedKey,H(s));e.setFocusedKey(a),a!=null&&(H(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):f&&e.replaceSelection(a))}break;case"End":if(t.getLastKey){if(e.focusedKey===null&&s.shiftKey)return;s.preventDefault();let a=t.getLastKey(e.focusedKey,H(s));e.setFocusedKey(a),a!=null&&(H(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(a):f&&e.replaceSelection(a))}break;case"PageDown":if(t.getKeyPageBelow&&e.focusedKey!=null){let a=t.getKeyPageBelow(e.focusedKey);a!=null&&(s.preventDefault(),y(a))}break;case"PageUp":if(t.getKeyPageAbove&&e.focusedKey!=null){let a=t.getKeyPageAbove(e.focusedKey);a!=null&&(s.preventDefault(),y(a))}break;case"a":H(s)&&e.selectionMode==="multiple"&&d!==!0&&(s.preventDefault(),e.selectAll());break;case"Escape":!u&&e.selectedKeys.size!==0&&(s.stopPropagation(),s.preventDefault(),e.clearSelection());break;case"Tab":if(!K){if(s.shiftKey)l.current.focus();else{let a=Ie(l.current,{tabbable:!0}),B,I;do I=a.lastChild(),I&&(B=I);while(I);B&&!B.contains(document.activeElement)&&ue(B)}break}}},E=v.useRef({top:0,left:0});z(c,"scroll",p?void 0:()=>{var s,h,y,g;E.current={top:(y=(s=c.current)===null||s===void 0?void 0:s.scrollTop)!==null&&y!==void 0?y:0,left:(g=(h=c.current)===null||h===void 0?void 0:h.scrollLeft)!==null&&g!==void 0?g:0}});let w=s=>{if(e.isFocused){s.currentTarget.contains(s.target)||e.setFocused(!1);return}if(s.currentTarget.contains(s.target)){if(e.setFocused(!0),e.focusedKey==null){var h,y;let n=C=>{C!=null&&(e.setFocusedKey(C),f&&e.replaceSelection(C))},m=s.relatedTarget;var g,D;m&&s.currentTarget.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_FOLLOWING?n((g=e.lastSelectedKey)!==null&&g!==void 0?g:(h=t.getLastKey)===null||h===void 0?void 0:h.call(t)):n((D=e.firstSelectedKey)!==null&&D!==void 0?D:(y=t.getFirstKey)===null||y===void 0?void 0:y.call(t))}else!p&&c.current&&(c.current.scrollTop=E.current.top,c.current.scrollLeft=E.current.left);if(e.focusedKey!=null&&c.current){let n=c.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);n&&(n.contains(document.activeElement)||ue(n),de()==="keyboard"&&ye(n,{containingElement:l.current}))}}},R=s=>{s.currentTarget.contains(s.relatedTarget)||e.setFocused(!1)},T=v.useRef(!1);z(l,He,$?s=>{let{detail:h}=s;s.stopPropagation(),e.setFocused(!0),(h==null?void 0:h.focusStrategy)==="first"&&(T.current=!0)}:void 0);let M=le(()=>{var s,h;let y=(h=(s=t.getFirstKey)===null||s===void 0?void 0:s.call(t))!==null&&h!==void 0?h:null;if(y==null){var g;(g=l.current)===null||g===void 0||g.dispatchEvent(new CustomEvent(Se,{cancelable:!0,bubbles:!0})),e.collection.size>0&&(T.current=!1)}else e.setFocusedKey(y),T.current=!1});he(()=>{T.current&&M()},[e.collection,M]);let A=le(()=>{e.collection.size>0&&(T.current=!1)});he(()=>{A()},[e.focusedKey,A]),z(l,Oe,$?s=>{s.stopPropagation(),e.setFocused(!1),e.setFocusedKey(null)}:void 0);const L=v.useRef(i);v.useEffect(()=>{if(L.current){var s,h;let D=null;var y;i==="first"&&(D=(y=(s=t.getFirstKey)===null||s===void 0?void 0:s.call(t))!==null&&y!==void 0?y:null);var g;i==="last"&&(D=(g=(h=t.getLastKey)===null||h===void 0?void 0:h.call(t))!==null&&g!==void 0?g:null);let n=e.selectedKeys;if(n.size){for(let m of n)if(e.canSelectItem(m)){D=m;break}}e.setFocused(!0),e.setFocusedKey(D),D==null&&!$&&l.current&&ee(l.current)}},[]);let O=v.useRef(e.focusedKey);v.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==O.current||L.current)&&c.current&&l.current){let s=de(),h=l.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);if(!h)return;(s==="keyboard"||L.current)&&(De(c.current,h),s!=="virtual"&&ye(h,{containingElement:l.current}))}!$&&e.isFocused&&e.focusedKey==null&&O.current!=null&&l.current&&ee(l.current),O.current=e.focusedKey,L.current=!1}),z(l,"react-aria-focus-scope-restore",s=>{s.preventDefault(),e.setFocused(!0)});let k={onKeyDown:x,onFocus:w,onBlur:R,onMouseDown(s){c.current===s.target&&s.preventDefault()}},{typeSelectProps:F}=Ve({keyboardDelegate:t,selectionManager:e});b||(k=se(F,k));let W;return $?W=-1:W=e.focusedKey==null?0:-1,{collectionProps:{...k,tabIndex:W}}}function dt(r){let{id:e,selectionManager:t,key:l,ref:i,shouldSelectOnPressUp:o,shouldUseVirtualFocus:u,focus:d,isDisabled:f,onAction:b,allowsDifferentPressOrigin:$,linkBehavior:K="action"}=r,p=Pe();e=Ce(e);let c=n=>{if(n.pointerType==="keyboard"&&oe(n))t.toggleSelection(l);else{if(t.selectionMode==="none")return;if(t.isLink(l)){if(K==="selection"&&i.current){let m=t.getItemProps(l);p.open(i.current,n,m.href,m.routerOptions),t.setSelectedKeys(t.selectedKeys);return}else if(K==="override"||K==="none")return}t.selectionMode==="single"?t.isSelected(l)&&!t.disallowEmptySelection?t.toggleSelection(l):t.replaceSelection(l):n&&n.shiftKey?t.extendSelection(l):t.selectionBehavior==="toggle"||n&&(H(n)||n.pointerType==="touch"||n.pointerType==="virtual")?t.toggleSelection(l):t.replaceSelection(l)}};v.useEffect(()=>{if(l===t.focusedKey&&t.isFocused)if(!u)d?d():document.activeElement!==i.current&&i.current&&ee(i.current);else{var m;let C=new CustomEvent(Se,{cancelable:!0,bubbles:!0});(m=i.current)===null||m===void 0||m.dispatchEvent(C)}},[i,l,t.focusedKey,t.childFocusStrategy,t.isFocused,u]),f=f||t.isDisabled(l);let P={};!u&&!f?P={tabIndex:l===t.focusedKey?0:-1,onFocus(n){n.target===i.current&&t.setFocusedKey(l)}}:f&&(P.onMouseDown=n=>{n.preventDefault()});let S=t.isLink(l)&&K==="override",N=t.isLink(l)&&K!=="selection"&&K!=="none",x=!f&&t.canSelectItem(l)&&!S,E=(b||N)&&!f,w=E&&(t.selectionBehavior==="replace"?!x:!x||t.isEmpty),R=E&&x&&t.selectionBehavior==="replace",T=w||R,M=v.useRef(null),A=T&&x,L=v.useRef(!1),O=v.useRef(!1),k=n=>{if(b&&b(),N&&i.current){let m=t.getItemProps(l);p.open(i.current,n,m.href,m.routerOptions)}},F={};o?(F.onPressStart=n=>{M.current=n.pointerType,L.current=A,n.pointerType==="keyboard"&&(!T||be())&&c(n)},$?(F.onPressUp=w?void 0:n=>{n.pointerType==="mouse"&&x&&c(n)},F.onPress=w?k:n=>{n.pointerType!=="keyboard"&&n.pointerType!=="mouse"&&x&&c(n)}):F.onPress=n=>{if(w||R&&n.pointerType!=="mouse"){if(n.pointerType==="keyboard"&&!ge())return;k(n)}else n.pointerType!=="keyboard"&&x&&c(n)}):(F.onPressStart=n=>{M.current=n.pointerType,L.current=A,O.current=w,x&&(n.pointerType==="mouse"&&!w||n.pointerType==="keyboard"&&(!E||be()))&&c(n)},F.onPress=n=>{(n.pointerType==="touch"||n.pointerType==="pen"||n.pointerType==="virtual"||n.pointerType==="keyboard"&&T&&ge()||n.pointerType==="mouse"&&O.current)&&(T?k(n):x&&c(n))}),P["data-key"]=l,F.preventFocusOnPress=u;let{pressProps:W,isPressed:s}=Ke(F),h=R?n=>{M.current==="mouse"&&(n.stopPropagation(),n.preventDefault(),k(n))}:void 0,{longPressProps:y}=Ue({isDisabled:!A,onLongPress(n){n.pointerType==="touch"&&(c(n),t.setSelectionBehavior("toggle"))}}),g=n=>{M.current==="touch"&&L.current&&n.preventDefault()},D=t.isLink(l)?n=>{Fe.isOpening||n.preventDefault()}:void 0;return{itemProps:se(P,x||w?W:{},A?y:{},{onDoubleClick:h,onDragStartCapture:g,onClick:D,id:e}),isPressed:s,isSelected:t.isSelected(l),isFocused:t.isFocused&&t.focusedKey===l,isDisabled:f,allowsSelection:x,hasAction:T}}function ge(){let r=window.event;return(r==null?void 0:r.key)==="Enter"}function be(){let r=window.event;return(r==null?void 0:r.key)===" "||(r==null?void 0:r.code)==="Space"}class me{getItemRect(e){let t=this.ref.current;if(!t)return null;let l=e!=null?t.querySelector(`[data-key="${CSS.escape(e.toString())}"]`):null;if(!l)return null;let i=t.getBoundingClientRect(),o=l.getBoundingClientRect();return{x:o.left-i.left+t.scrollLeft,y:o.top-i.top+t.scrollTop,width:o.width,height:o.height}}getContentSize(){let e=this.ref.current;var t,l;return{width:(t=e==null?void 0:e.scrollWidth)!==null&&t!==void 0?t:0,height:(l=e==null?void 0:e.scrollHeight)!==null&&l!==void 0?l:0}}getVisibleRect(){let e=this.ref.current;var t,l,i,o;return{x:(t=e==null?void 0:e.scrollLeft)!==null&&t!==void 0?t:0,y:(l=e==null?void 0:e.scrollTop)!==null&&l!==void 0?l:0,width:(i=e==null?void 0:e.offsetWidth)!==null&&i!==void 0?i:0,height:(o=e==null?void 0:e.offsetHeight)!==null&&o!==void 0?o:0}}constructor(e){this.ref=e}}class qe{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let l=e;for(;l!=null;){let i=this.collection.getItem(l);if((i==null?void 0:i.type)==="item"&&!this.isDisabled(i))return l;l=t(l)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,l=>this.collection.getKeyAfter(l))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,l=>this.collection.getKeyBefore(l))}findKey(e,t,l){let i=e,o=this.layoutDelegate.getItemRect(i);if(!o||i==null)return null;let u=o;do{if(i=t(i),i==null)break;o=this.layoutDelegate.getItemRect(i)}while(o&&l(u,o)&&i!=null);return i}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let t=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyAfter(t))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyBefore(t))}getKeyPageAbove(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!ie(t))return this.getFirstKey();let i=e;if(this.orientation==="horizontal"){let o=Math.max(0,l.x+l.width-this.layoutDelegate.getVisibleRect().width);for(;l&&l.x>o&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let o=Math.max(0,l.y+l.height-this.layoutDelegate.getVisibleRect().height);for(;l&&l.y>o&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!ie(t))return this.getLastKey();let i=e;if(this.orientation==="horizontal"){let o=Math.min(this.layoutDelegate.getContentSize().width,l.y-l.width+this.layoutDelegate.getVisibleRect().width);for(;l&&l.x<o&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let o=Math.min(this.layoutDelegate.getContentSize().height,l.y-l.height+this.layoutDelegate.getVisibleRect().height);for(;l&&l.y<o&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,i=t||this.getFirstKey();for(;i!=null;){let o=l.getItem(i);if(!o)return null;let u=o.textValue.slice(0,e.length);if(o.textValue&&this.collator.compare(u,e)===0)return i;i=this.getNextKey(i)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new me(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new me(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function ft(r){let{selectionManager:e,collection:t,disabledKeys:l,ref:i,keyboardDelegate:o,layoutDelegate:u}=r,d=je({usage:"search",sensitivity:"base"}),f=e.disabledBehavior,b=v.useMemo(()=>o||new qe({collection:t,disabledKeys:l,disabledBehavior:f,ref:i,collator:d,layoutDelegate:u}),[o,u,t,l,i,d,f]),{collectionProps:$}=Xe({...r,ref:i,selectionManager:e,keyboardDelegate:b});return{listProps:$}}function Te(r){return null}Te.getCollectionNode=function*(e,t){let{childItems:l,title:i,children:o}=e,u=e.title||e.children,d=e.textValue||(typeof u=="string"?u:"")||e["aria-label"]||"";!d&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:u,textValue:d,"aria-label":e["aria-label"],hasChildNodes:Ze(e),*childNodes(){if(l)for(let f of l)yield{type:"item",value:f};else if(i){let f=[];ne.Children.forEach(o,b=>{f.push({type:"item",element:b})}),yield*f}}}};function Ze(r){return r.hasChildItems!=null?r.hasChildItems:!!(r.childItems||r.title&&ne.Children.count(r.children)>0)}let Je=Te;function we(r){return null}we.getCollectionNode=function*(e){let{children:t,title:l,items:i}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:l,"aria-label":e["aria-label"],*childNodes(){if(typeof t=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");for(let o of i)yield{type:"item",value:o,renderer:t}}else{let o=[];ne.Children.forEach(t,u=>{o.push({type:"item",element:u})}),yield*o}}}};let Qe=we;const $e=new WeakMap;function ht(r){let e=$e.get(r);if(e!=null)return e;let t=0,l=i=>{for(let o of i)o.type==="section"?l(Ne(o,r)):t++};return l(r),$e.set(r,t),t}const pt=(r,e)=>({"aria-label":r,children:e.map(({id:t,menuItems:l,ariaLabel:i})=>fe.jsx(Qe,{title:t,"aria-label":i,children:l.map(o=>fe.jsx(Je,{children:o.title},o.id))},t))}),yt=r=>r.flatMap(({menuItems:e})=>e),vt=r=>r.reduce((e,t)=>({...e,[t.id]:t}),{}),gt=r=>new Set(r.reduce((e,t)=>[...e,t.disabled?t.id:""],[]).filter(e=>e!=="").map(e=>e.toString()));export{ft as $,dt as a,Je as b,ht as c,ut as d,vt as e,gt as f,yt as g,je as h,qe as i,Ve as j,Ue as k,pt as m};
