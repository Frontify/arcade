import{_ as k}from"./extends-CF3RwP-h.js";import{r as a}from"./index-BwDkhjyp.js";function A(n,e){if(n==null)return{};var r={};for(var t in n)if({}.hasOwnProperty.call(n,t)){if(e.includes(t))continue;r[t]=n[t]}return r}var I=a.useLayoutEffect,B=function(e){var r=a.useRef(e);return I(function(){r.current=e}),r},L=function(e,r){if(typeof e=="function"){e(r);return}e.current=r},M=function(e,r){var t=a.useRef();return a.useCallback(function(i){e.current=i,t.current&&L(t.current,null),t.current=r,r&&L(r,i)},[r])},R={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},N=function(e){Object.keys(R).forEach(function(r){e.style.setProperty(r,R[r],"important")})},H=N,o=null,w=function(e,r){var t=e.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?t+r.borderSize:t-r.paddingSize};function _(n,e,r,t){r===void 0&&(r=1),t===void 0&&(t=1/0),o||(o=document.createElement("textarea"),o.setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),H(o)),o.parentNode===null&&document.body.appendChild(o);var i=n.paddingSize,s=n.borderSize,d=n.sizingStyle,g=d.boxSizing;Object.keys(d).forEach(function(v){var p=v;o.style[p]=d[p]}),H(o),o.value=e;var u=w(o,n);o.value=e,u=w(o,n),o.value="x";var c=o.scrollHeight-i,f=c*r;g==="border-box"&&(f=f+i+s),u=Math.max(f,u);var l=c*t;return g==="border-box"&&(l=l+i+s),u=Math.min(l,u),[u,c]}var C=function(){},$=function(e,r){return e.reduce(function(t,i){return t[i]=r[i],t},{})},P=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],j=!!document.documentElement.currentStyle,O=function(e){var r=window.getComputedStyle(e);if(r===null)return null;var t=$(P,r),i=t.boxSizing;if(i==="")return null;j&&i==="border-box"&&(t.width=parseFloat(t.width)+parseFloat(t.borderRightWidth)+parseFloat(t.borderLeftWidth)+parseFloat(t.paddingRight)+parseFloat(t.paddingLeft)+"px");var s=parseFloat(t.paddingBottom)+parseFloat(t.paddingTop),d=parseFloat(t.borderBottomWidth)+parseFloat(t.borderTopWidth);return{sizingStyle:t,paddingSize:s,borderSize:d}},Y=O;function E(n,e,r){var t=B(r);a.useLayoutEffect(function(){var i=function(d){return t.current(d)};if(n)return n.addEventListener(e,i),function(){return n.removeEventListener(e,i)}},[])}var G=function(e){E(window,"resize",e)},U=function(e){E(document.fonts,"loadingdone",e)},X=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Z=function(e,r){var t=e.cacheMeasurements,i=e.maxRows,s=e.minRows,d=e.onChange,g=d===void 0?C:d,u=e.onHeightChange,c=u===void 0?C:u,f=A(e,X),l=f.value!==void 0,v=a.useRef(null),p=M(v,r),z=a.useRef(0),S=a.useRef(),b=function(){var h=v.current,x=t&&S.current?S.current:Y(h);if(x){S.current=x;var y=_(x,h.value||h.placeholder||"x",s,i),m=y[0],W=y[1];z.current!==m&&(z.current=m,h.style.setProperty("height",m+"px","important"),c(m,{rowHeight:W}))}},T=function(h){l||b(),g(h)};return a.useLayoutEffect(b),G(b),U(b),a.createElement("textarea",k({},f,{onChange:T,ref:p}))},J=a.forwardRef(Z);export{J as i};
