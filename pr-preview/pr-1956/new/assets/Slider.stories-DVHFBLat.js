import{j as c}from"./jsx-runtime-Nms4Y4qS.js";import{r as m}from"./index-BwDkhjyp.js";import{u as Me,c as E}from"./index-C0eKk31T.js";import{u as j,P as N}from"./index-bQ6N_mn_.js";import{c as _e}from"./index-BWD2N0gV.js";import{c as Pe,u as Ce}from"./index-CZiYDW6a.js";import{u as De}from"./index-BgCrdp81.js";import{u as Ee}from"./index-BFqVUZ9w.js";import{L as Te}from"./Label-B1u5uz7U.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-B8XB3FuZ.js";import"./styleUtilities-C-w4CMuR.js";function de(e,[t,r]){return Math.min(r,Math.max(t,e))}var ce=["PageUp","PageDown"],ue=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],me={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},T="Slider",[q,Ve,Ie]=Pe(T),[fe,ft]=_e(T,[Ie]),[je,H]=fe(T),pe=m.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[n],value:v,onValueChange:s=()=>{},onValueCommit:u=()=>{},inverted:g=!1,...b}=e,S=m.useRef(new Set),f=m.useRef(0),y=o==="horizontal"?Ae:Oe,[p=[],R]=Me({prop:v,defaultProp:h,onChange:x=>{var C;(C=[...S.current][f.current])==null||C.focus(),s(x)}}),P=m.useRef(p);function X(x){const M=He(p,x);V(x,M)}function L(x){V(x,f.current)}function ye(){const x=P.current[f.current];p[f.current]!==x&&u(p)}function V(x,M,{commit:C}={commit:!1}){const G=qe(i),F=Ue(Math.round((x-n)/i)*i+n,G),I=de(F,[n,a]);R((D=[])=>{const _=Be(D,I,M);if(Fe(_,d*i)){f.current=_.indexOf(I);const W=String(_)!==String(D);return W&&C&&u(_),W?_:D}else return D})}return c.jsx(je,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:f,thumbs:S.current,values:p,orientation:o,children:c.jsx(q.Provider,{scope:e.__scopeSlider,children:c.jsx(q.Slot,{scope:e.__scopeSlider,children:c.jsx(y,{"aria-disabled":l,"data-disabled":l?"":void 0,...b,ref:t,onPointerDown:E(b.onPointerDown,()=>{l||(P.current=p)}),min:n,max:a,inverted:g,onSlideStart:l?void 0:X,onSlideMove:l?void 0:L,onSlideEnd:l?void 0:ye,onHomeKeyDown:()=>!l&&V(n,0,{commit:!0}),onEndKeyDown:()=>!l&&V(a,p.length-1,{commit:!0}),onStepKeyDown:({event:x,direction:M})=>{if(!l){const F=ce.includes(x.key)||x.shiftKey&&ue.includes(x.key)?10:1,I=f.current,D=p[I],_=i*F*M;V(D+_,I,{commit:!0})}}})})})})});pe.displayName=T;var[he,Se]=fe(T,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ae=m.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:d,onStepKeyDown:h,...v}=e,[s,u]=m.useState(null),g=j(t,p=>u(p)),b=m.useRef(),S=Ce(a),f=S==="ltr",w=f&&!i||!f&&i;function y(p){const R=b.current||s.getBoundingClientRect(),P=[0,R.width],L=Y(P,w?[r,n]:[n,r]);return b.current=R,L(p-R.left)}return c.jsx(he,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:c.jsx(ge,{dir:S,"data-orientation":"horizontal",...v,ref:g,style:{...v.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:p=>{const R=y(p.clientX);o==null||o(R)},onSlideMove:p=>{const R=y(p.clientX);l==null||l(R)},onSlideEnd:()=>{b.current=void 0,d==null||d()},onStepKeyDown:p=>{const P=me[w?"from-left":"from-right"].includes(p.key);h==null||h({event:p,direction:P?-1:1})}})})}),Oe=m.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:d,...h}=e,v=m.useRef(null),s=j(t,v),u=m.useRef(),g=!a;function b(S){const f=u.current||v.current.getBoundingClientRect(),w=[0,f.height],p=Y(w,g?[n,r]:[r,n]);return u.current=f,p(S-f.top)}return c.jsx(he,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:c.jsx(ge,{"data-orientation":"vertical",...h,ref:s,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const f=b(S.clientY);i==null||i(f)},onSlideMove:S=>{const f=b(S.clientY);o==null||o(f)},onSlideEnd:()=>{u.current=void 0,l==null||l()},onStepKeyDown:S=>{const w=me[g?"from-bottom":"from-top"].includes(S.key);d==null||d({event:S,direction:w?-1:1})}})})}),ge=m.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:d,...h}=e,v=H(T,r);return c.jsx(N.span,{...h,ref:t,onKeyDown:E(e.onKeyDown,s=>{s.key==="Home"?(o(s),s.preventDefault()):s.key==="End"?(l(s),s.preventDefault()):ce.concat(ue).includes(s.key)&&(d(s),s.preventDefault())}),onPointerDown:E(e.onPointerDown,s=>{const u=s.target;u.setPointerCapture(s.pointerId),s.preventDefault(),v.thumbs.has(u)?u.focus():n(s)}),onPointerMove:E(e.onPointerMove,s=>{s.target.hasPointerCapture(s.pointerId)&&a(s)}),onPointerUp:E(e.onPointerUp,s=>{const u=s.target;u.hasPointerCapture(s.pointerId)&&(u.releasePointerCapture(s.pointerId),i(s))})})}),ve="SliderTrack",xe=m.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=H(ve,r);return c.jsx(N.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});xe.displayName=ve;var U="SliderRange",be=m.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=H(U,r),i=Se(U,r),o=m.useRef(null),l=j(t,o),d=a.values.length,h=a.values.map(u=>Re(u,a.min,a.max)),v=d>1?Math.min(...h):0,s=100-Math.max(...h);return c.jsx(N.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:v+"%",[i.endEdge]:s+"%"}})});be.displayName=U;var $="SliderThumb",we=m.forwardRef((e,t)=>{const r=Ve(e.__scopeSlider),[n,a]=m.useState(null),i=j(t,l=>a(l)),o=m.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return c.jsx(ke,{...e,ref:i,index:o})}),ke=m.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=H($,r),l=Se($,r),[d,h]=m.useState(null),v=j(t,y=>h(y)),s=d?!!d.closest("form"):!0,u=Ee(d),g=o.values[n],b=g===void 0?0:Re(g,o.min,o.max),S=Ne(n,o.values.length),f=u==null?void 0:u[l.size],w=f?ze(f,b,l.direction):0;return m.useEffect(()=>{if(d)return o.thumbs.add(d),()=>{o.thumbs.delete(d)}},[d,o.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${w}px)`},children:[c.jsx(q.ItemSlot,{scope:e.__scopeSlider,children:c.jsx(N.span,{role:"slider","aria-label":e["aria-label"]||S,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:v,style:g===void 0?{display:"none"}:e.style,onFocus:E(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),s&&c.jsx(Ke,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),value:g},n)]})});we.displayName=$;var Ke=e=>{const{value:t,...r}=e,n=m.useRef(null),a=De(t);return m.useEffect(()=>{const i=n.current,o=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(o,"value").set;if(a!==t&&d){const h=new Event("input",{bubbles:!0});d.call(i,t),i.dispatchEvent(h)}},[a,t]),c.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:t})};function Be(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function Re(e,t,r){const i=100/(r-t)*(e-t);return de(i,[0,100])}function Ne(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function He(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function ze(e,t,r){const n=e/2,i=Y([0,50],[0,n]);return(n-i(t)*r)*r}function Le(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function Fe(e,t){if(t>0){const r=Le(e);return Math.min(...r)>=t}return!0}function Y(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function qe(e){return(String(e).split(".")[1]||"").length}function Ue(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var $e=pe,Ye=xe,Xe=be,Ge=we;const We="_SliderRoot_1f4rv_1",Je="_SliderTrack_1f4rv_11",Qe="_SliderRange_1f4rv_19",Ze="_SliderThumb_1f4rv_26",A={SliderRoot:We,SliderTrack:Je,SliderRange:Qe,SliderThumb:Ze},et=()=>`slider-${Math.random().toString(36).substring(2,9)}`,z=({id:e=et(),label:t,value:r,defaultValue:n=[0],min:a=0,max:i=100,step:o=1,minStepsBetweenThumbs:l,showMinMax:d=!1,disabled:h=!1,onChange:v,onCommit:s,"aria-label":u,"data-test-id":g="fondue-slider"})=>c.jsxs("div",{"data-test-id":g,children:[c.jsx(Te,{htmlFor:e,children:t}),c.jsxs($e,{id:e,className:A.SliderRoot,defaultValue:n,value:r,min:a,max:i,step:o,minStepsBetweenThumbs:l,"aria-label":u,disabled:h,onValueChange:v,onValueCommit:s,children:[c.jsx(Ye,{className:A.SliderTrack,children:c.jsx(Xe,{className:A.SliderRange})}),(r||n).map((b,S)=>c.jsx(Ge,{className:A.SliderThumb},S))]}),d&&c.jsxs("span",{children:[a," - ",i]})]});z.displayName="Slider";z.__docgenInfo={description:"Slider component that provides a UI for range selection, supporting features like accessibility through ARIA labels,\ncustom step increments, and optional min/max value display.\n\n@param {SliderProps} props The properties passed to the Slider component.\n- `id`: Optional. A unique identifier for the slider. If not provided, one is generated.\n- `label`: Descriptive label for the slider, used for accessibility and form labeling.\n- `value`: Optional. Current value(s) of the slider. If provided, the slider is controlled externally.\n- `defaultValue`: Optional. Initial value(s) of the slider when it mounts, used if `value` is not provided. Enables uncontrolled usage.\n- `min`: Optional. Minimum value of the slider.\n- `max`: Optional. Maximum value of the slider.\n- `step`: Optional. The granularity with which the slider can step through values.\n- `minStepsBetweenThumbs`: Optional. Minimum steps between thumbs in a range slider.\n- `showMinMax`: Optional. Determines whether to display the minimum and maximum values below the slider.\n- `disabled`: Optional. If true, disables slider interaction.\n- `onChange`: Optional. Function called with the current value when it changes.\n- `onCommit`: Optional. Function called when the user stops changing the value.\n- `aria-label`: Accessibility label for the slider. Mandatory for screen readers.\n- `data-test-id`: Optional. An identifier used for testing purposes. Defaults to 'fondue-slider'.",methods:[],displayName:"Slider",props:{id:{defaultValue:{value:"generateId()",computed:!0},required:!1},defaultValue:{defaultValue:{value:"[0]",computed:!1},required:!1},min:{defaultValue:{value:"0",computed:!1},required:!1},max:{defaultValue:{value:"100",computed:!1},required:!1},step:{defaultValue:{value:"1",computed:!1},required:!1},showMinMax:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1},"data-test-id":{defaultValue:{value:"'fondue-slider'",computed:!1},required:!1}}};const pt={component:z,tags:["autodocs"],parameters:{status:{type:"in_progress"}},args:{label:"Slide me","aria-label":"Slide me"}},O={args:{min:0,max:100,step:10}},k={args:{min:0,max:100,showMinMax:!0,step:1}},K={render:e=>{const[t,r]=m.useState([33,67]);return c.jsx(z,{onChange:n=>{if(!(!n[0]||!n[1])){if(n[1]-n[0]>80){alert("The range is too big");return}r(n)}},value:t,...e})}},B={args:{min:0,max:100,defaultValue:[33,67],step:1}};var J,Q,Z;O.parameters={...O.parameters,docs:{...(J=O.parameters)==null?void 0:J.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    step: 10
  }
}`,...(Z=(Q=O.parameters)==null?void 0:Q.docs)==null?void 0:Z.source}}};var ee,te,ne;k.parameters={...k.parameters,docs:{...(ee=k.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    showMinMax: true,
    step: 1
  }
}`,...(ne=(te=k.parameters)==null?void 0:te.docs)==null?void 0:ne.source}}};var re,oe,ae;K.parameters={...K.parameters,docs:{...(re=K.parameters)==null?void 0:re.docs,source:{originalSource:`{
  render: args => {
    const [sliderRange, setSliderRange] = useState([33, 67]);
    return <Slider onChange={value => {
      if (!value[0] || !value[1]) {
        return;
      }
      if (value[1] - value[0] > 80) {
        alert('The range is too big');
        return;
      }
      setSliderRange(value);
    }} value={sliderRange} {...args} />;
  }
}`,...(ae=(oe=K.parameters)==null?void 0:oe.docs)==null?void 0:ae.source}}};var se,ie,le;B.parameters={...B.parameters,docs:{...(se=B.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    defaultValue: [33, 67],
    step: 1
  }
}`,...(le=(ie=B.parameters)==null?void 0:ie.docs)==null?void 0:le.source}}};const ht=["SimpleSlider","ShowMinMax","MultipleThumbsControlled","MultipleThumbsUncontrolled"];export{K as MultipleThumbsControlled,B as MultipleThumbsUncontrolled,k as ShowMinMax,O as SimpleSlider,ht as __namedExportsOrder,pt as default};
