import{a as d,$ as o,c as $}from"./SSRProvider-CYXx33DY.js";import{r as c}from"./index-BwDkhjyp.js";function s(r){let[e,u]=c.useState(r),t=c.useRef(null),f=d(()=>{if(!t.current)return;let n=t.current.next();if(n.done){t.current=null;return}e===n.value?f():u(n.value)});o(()=>{t.current&&f()});let a=d(n=>{t.current=n(e),f()});return[e,a]}let b=!!(typeof window<"u"&&window.document&&window.document.createElement),l=new Map;function i(r){let[e,u]=c.useState(r),t=c.useRef(null),f=$(e),a=c.useCallback(n=>{t.current=n},[]);return b&&l.set(f,a),o(()=>{let n=f;return()=>{l.delete(n)}},[f]),c.useEffect(()=>{let n=t.current;n&&(t.current=null,u(n))}),f}function m(r,e){if(r===e)return r;let u=l.get(r);if(u)return u(e),e;let t=l.get(e);return t?(t(r),r):e}function w(r=[]){let e=i(),[u,t]=s(e),f=c.useCallback(()=>{t(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,t]);return o(f,[e,f,...r]),u}function v(...r){return(...e)=>{for(let u of r)typeof u=="function"&&u(...e)}}export{i as $,v as a,w as b,m as c};
